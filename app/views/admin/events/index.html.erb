<% content_for :title, "Admin — Événements" %>

<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="mb-0">Événements <span class="badge bg-secondary"><%= @events.count %></span></h2>
  <%= link_to "← Dashboard", admin_root_path, class: "btn btn-outline-secondary btn-sm" %>
</div>

<div class="table-responsive">
  <table class="table table-dark table-hover table-bordered align-middle">
    <thead class="table-warning text-dark">
      <tr>
        <th>Titre</th>
        <th>Organisateur</th>
        <th>Date</th>
        <th>Lieu</th>
        <th>Prix</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @events.each do |event| %>
        <tr>
          <td>
            <%= link_to event.title, admin_event_path(event), class: "text-warning text-decoration-none fw-semibold" %>
          </td>
          <td class="small text-muted"><%= event.user.email %></td>
          <td class="small"><%= event.start_date.strftime("%d/%m/%Y") %></td>
          <td class="small"><%= event.location %></td>
          <td class="small"><%= event.price == 0 ? "Gratuit" : "#{event.price} €" %></td>
          <td>
            <% if event.validated.nil? %>
              <span class="badge bg-warning text-dark">En attente</span>
            <% elsif event.validated? %>
              <span class="badge bg-success">Validé</span>
            <% else %>
              <span class="badge bg-danger">Refusé</span>
            <% end %>
          </td>
          <td>
            <div class="d-flex gap-1">
              <%= link_to "Voir", admin_event_path(event), class: "btn btn-outline-light btn-sm" %>
              <%= link_to "Modifier", edit_admin_event_path(event), class: "btn btn-outline-warning btn-sm" %>
              <%= button_to "Supprimer", admin_event_path(event), method: :delete,
                  data: { turbo_confirm: "Supprimer « #{event.title} » définitivement ?" },
                  class: "btn btn-outline-danger btn-sm" %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
